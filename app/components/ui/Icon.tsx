"use client";

import * as React from "react";

const PATH = {
  jacket:
    "m 57.347968,99.698913 c 0,0 -1.024944,-9.255329 -5.779764,-9.63294 -4.752892,-0.377612 -5.785543,0.822653 -5.779764,3.853176 0.0058,3.030523 3.575748,5.864533 5.779764,3.853176 2.204017,-2.009432 5.498483,-9.342026 3.853176,-13.486116 -1.643379,-4.142165 -16.996359,-35.231515 -17.339292,-40.458348 -0.342932,-5.224907 -1.662645,-12.453465 0,-13.486116 1.662646,-1.030725 5.779764,-3.853176 5.779764,-3.853176 L 38.082088,20.708805 41.935264,7.2226886 c 0,0 -19.452759,5.3212364 -21.192468,9.6329404 -1.737782,4.31363 -19.0192763,96.855361 -15.4127036,102.109161 3.6084994,5.25573 9.8044066,4.38299 13.4861156,3.85318 3.091691,-25.807131 7.944145,-49.853496 13.486116,-73.210345 0,0 1.465088,62.914105 -1.926588,73.210345 -0.955526,2.90072 1.63182,4.88775 11.559528,3.85317 9.929635,-1.03457 21.600905,-20.8476 21.192468,-30.825403 C 62.721222,85.869864 49.15523,24.982378 48.995506,17.120792 48.835782,9.2592064 54.415701,1.2716331 63.127732,1.3506232 73.821569,1.5819117 77.606263,11.235183 77.709724,17.10905 77.823738,23.582064 65.148723,87.648105 65.05432,95.845737 c -0.0944,8.199563 7.588831,31.786773 17.339292,30.825403 9.750462,-0.95944 7.6736,-0.81302 11.559528,-3.85317 3.885928,-3.03823 0,-71.283757 0,-71.283757 0,0 7.91635,70.409087 11.55953,71.283757 3.6451,0.8766 14.45326,1.0654 17.33929,-1.92659 C 125.73992,117.89939 107.66852,20.882198 105.51267,16.855629 103.35682,12.82906 87.633932,5.3519717 84.3202,5.2961006 81.008396,5.2402295 90.099964,20.708805 90.099964,20.708805 l -5.779764,5.779764 7.706352,3.853176 -11.559528,30.825408",
  rocket:
    "M 27.795569,93.530973 C 24.638746,91.424158 12.761138,108.73313 14.762556,109.9639 c 3.411249,-1.34013 9.09421,-1.64839 9.633096,1.13331 0.566653,2.92789 -6.23318,16.43293 -6.23318,16.43293 -0.979743,-0.90778 9.64103,-11.61808 15.299624,-10.19975 2.088682,0.52359 3.96657,5.09987 3.96657,5.09987 0.590452,2.30005 8.760451,-4.27992 9.633096,-10.19975 0.521321,-3.53931 4.171131,-11.43278 11.899708,-9.63309 8.258397,1.92322 8.215332,15.67248 8.499791,16.99958 0.283893,1.3271 25.603071,-18.64344 21.532805,-33.432512 C 84.923232,71.375417 64.40757,49.158096 43.661846,50.465364 20.961737,51.895596 10.416896,80.693455 11.362639,81.631266 12.015905,80.288718 53.289843,80.464528 54.428248,97.497543 54.668509,101.09465 45.167442,97.615406 39.128624,90.69771 30.992057,81.377405 47.956507,45.349057 69.211652,25.822769 83.894758,12.333601 103.09239,-0.03926202 116.76005,0.59992228 108.06533,63.091521 87.920825,81.094079 65.761303,91.264362",
  present:
    "m 11.245741,63.31163 c 0,0 -2.9348609,-17.828495 0,-20.70584 C 12.782575,41.098865 45.15117,40.437045 72.308796,34.480665 97.014697,29.061103 117.72667,18.511862 108.63987,7.3291745 93.86971,-10.848252 45.739369,25.502767 48.823006,39.538258 c 1.434838,6.531542 -3.28456,57.720212 2.015368,74.461262 1.366585,4.31756 26.515745,4.61204 27.893067,4.52768 6.717127,-0.41105 4.845933,-74.043314 3.834414,-78.988942 C 82.196985,37.733016 78.995248,29.669242 71.29421,21.862373 57.89293,8.2778087 35.534458,-6.0836083 24.282751,3.4947597 16.547203,10.079984 43.656515,29.804213 68.305667,37.85495 c 21.55708,7.040752 40.330373,2.808325 44.168623,3.983957 7.66499,2.347429 5.12661,1.332076 5.36818,3.067532 0.24156,1.735456 -0.49694,20.278686 -0.76689,21.472722 -0.26917,1.194037 -9.46103,1.208608 -10.73635,1.533766 -1.27456,0.325159 -81.988993,-2.700962 -83.590244,-2.300649 -1.600485,0.400313 -4.346693,1.717051 -4.601298,3.834415 -0.253839,2.117364 -0.04755,52.980107 5.36818,54.448687 5.416495,1.46858 65.635978,5.11511 75.154529,3.06753 9.519313,-2.04757 9.102133,-0.74464 9.969473,-3.06753 0.86735,-2.32289 1.53377,-44.479209 1.53377,-44.479209",
  globe:
    "m 46.753716,3.5000208 c 0,0 -44.9328725,12.9143042 -44.5320838,62.7497532 C 2.6224209,116.08522 41.019197,127.26885 64.971385,126.97534 88.923574,126.68183 127.83247,104.85707 125.69695,66.249774 123.56346,27.644506 93.901046,1.0608772 73.068129,1.4758352 52.237234,1.8907933 55.457713,7.7973668 54.850458,13.620949 c -0.605231,5.823581 16.903974,8.001605 16.193485,-2.024186 -0.71049,-10.0237668 -9.414487,8.764724 -14.169299,10.120928 -4.752788,1.356204 -13.67135,-6.143403 -16.193486,-2.024185 -2.52011,4.119217 3.775107,5.135358 4.048371,8.096742 0.273266,2.961383 -10.369901,7.667615 -8.096742,12.145114 2.273162,4.479523 4.080759,2.196241 8.096742,2.024185 4.015985,-0.170031 34.759315,-10.469088 34.411156,0 -0.348159,10.471113 -31.14412,0.692272 -34.411156,2.024186 -3.267034,1.333938 -14.60045,6.440958 -14.169298,16.193485 0.433176,9.75455 2.080862,11.720033 8.096742,12.145113 6.017904,0.427103 12.493273,9.639173 12.145114,16.193485 -0.346136,6.556337 4.285201,21.571744 10.120927,20.241854 5.837752,-1.32989 9.402343,-10.189749 14.1693,-16.193483 4.768981,-6.00171 13.829236,-4.011936 12.145113,0 -1.684122,4.01396 -4.716353,7.926713 -10.120927,8.096743 -5.402552,0.17206 -0.206468,-10.438725 2.024185,-16.193485 2.232677,-5.752735 -1.712461,-33.03471 -10.120927,-24.290227 -8.406444,8.746506 14.964803,16.436386 18.217669,14.169298 3.254892,-2.265063 10.220114,-5.884307 10.120929,-14.169298 -0.09919,-8.282967 -10.264646,-7.442931 -10.120929,-4.048372 0.145741,3.396584 13.074213,5.530075 20.241853,2.024187 7.16764,-3.503866 12.91228,9.05823 12.14511,12.145112",
  clock:
    "m 77.364897,13.947082 c 0,0 49.791113,3.3768 48.939123,48.939127 C 125.44981,108.44854 94.985208,124.17134 64.017862,125.17237 33.048293,126.1734 0.28132217,101.8462 1.7317,62.886209 3.1820777,23.926215 29.991822,1.919179 61.793357,2.8245529 93.594891,3.7299267 122.85827,25.216428 117.406,60.661704 111.95374,96.106979 92.934213,112.8753 66.242368,114.04984 39.550523,115.22438 12.327021,88.884009 12.854229,62.886209 13.650602,23.645927 41.198882,12.890442 61.793357,13.947082 c 2.72057,0.140144 2.393568,1.510439 2.44918,2.731693 0.371493,8.157263 -0.224675,46.207434 -0.224675,46.207434 0.785251,13.734099 -7.994873,9.923521 -9.436353,5.512326 -1.065539,-3.267799 2.682754,-5.950553 9.436353,-5.512326 h 28.918576",
  flame:
    "m 106.584,149.542 c 0,0 -7.445,3.76 -7,12 0.446,8.24 4.083,11.352 13,11 8.918,-0.352 15.249,-2.715 15,-13 -0.494,-20.474 -63.167,-25.22 -66,-5 -1.86,13.279 14,13 14,13 0,0 -39.555,6.809 -47,-1 -7.444,-7.809 -3.225,-30.028 -19,-30 -15.774,0.028 -8.368,32.005 6,31 9.076,-0.635 34.06,-11.065 53.59,-22.945 15.015,-9.134 30.463,-13.732 35.41,-15.055 13.711,-3.667 15.697,-17.077 10,-21 -5.84,-4.023 -23.113,4.872 -34,8 -10.822,3.109 -36.699,6.791 -36,-16 0.717,-23.364 11,-32 11,-32 0,0 13.91,14.497 12,31 -1.909,16.503 -9.912,23.748 -28,25 -18.087,1.252 -37.547,-15.128 -39,-39 -0.548,-9.013 1.706,-22.108 3,-22 2.486,4.895 7.695,20.724 20,19 13.664,-1.914 12.407,-13.372 16,-28 3.757,-15.292 -10.874,-55.521 -13,-54 40.499,10.775 60.434,40.748 64,86",
  tent: "M 72.8348,7.0691849 C 64.423492,55.705671 35.771811,87.015884 2.3977295,114.28313 -14.009745,115.96864 71.00593,101.63126 94.028255,113.03646 c 12.139485,6.01395 2.009015,12.20805 -3.831028,3.74625 C 83.026982,106.39231 71.518936,81.591606 68.471442,62.54617 64.878528,77.980615 57.71327,91.341218 46.65465,102.43973 c 20.138146,-1.91551 45.251143,-0.18825 81.0338,9.35006 C 104.88367,94.743391 82.508366,64.439244 60.991399,7.6925218",
};
export interface IconProps {
  icon: keyof typeof PATH;
  delay?: number;
  animate?: boolean;
}

const Icon = ({ icon, delay = 0.1, animate = true }: IconProps) => {
  const pathRef = React.useRef<SVGPathElement>(null);
  const [pathLength, setPathLength] = React.useState(0);
  const [isVisible, setIsVisible] = React.useState(false);
  const ref = React.useRef<HTMLDivElement>(null);

  React.useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setIsVisible(true);
        }
      },
      { threshold: 1 }
    );

    if (ref.current) {
      observer.observe(ref.current);
    }

    return () => observer.disconnect();
  }, []);

  React.useEffect(() => {
    if (pathRef.current) {
      const length = pathRef.current.getTotalLength();
      setPathLength(length);
    }
  }, []);

  return (
    <div ref={ref}>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        xmlSpace="preserve"
        style={{
          fillRule: "evenodd",
          clipRule: "evenodd",
          strokeLinecap: "round",
          strokeLinejoin: "round",
          strokeMiterlimit: 1.5,
        }}
        viewBox="0 0 128 128"
      >
        <path
          ref={pathRef}
          d={PATH[icon]}
          className="stroke-palette-dark-green"
          style={{
            fill: "none",
            strokeWidth: ".1em",
            strokeDasharray: pathLength,
            strokeDashoffset: pathLength,
            animation:
              animate && isVisible
                ? `draw-line 1s cubic-bezier(0.52, 0, 0.51, 0.98) ${delay}s forwards`
                : "",
          }}
        />
      </svg>
    </div>
  );
};
export default Icon;
